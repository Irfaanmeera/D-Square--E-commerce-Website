

   {{> userHeader}}
    <section class="py-5 bg-light">
      <div class="container">
        <div class="row">
          <div class="col-lg-3 col-xl-3">
            <nav class="nav flex-lg-column w-100 d-flex nav-pills mb-4">
              <a class="nav-link my-0 bg-light" href="/userAccount"><p class="pb-0 mb-0" style="width: 100px">Account main</p></a>
              <a class="nav-link my-0 bg-light" href="/orderList"><p class="pb-0 mb-0" style="width: 100px">Orders history</p></a>
              <a class="nav-link my-0 active" href="#"><p class="pb-0 mb-0" style="width: 100px">My wishlist</p></a>
              <a class="nav-link my-0 bg-light" href="#"><p class="pb-0 mb-0" style="width: 100px">Transactions</p></a>
              <a class="nav-link my-0 bg-light" href="#"><p class="pb-0 mb-0" style="width: 100px">Profile setting</p></a>
              <a class="nav-link my-0 bg-light" href="#"><p class="pb-0 mb-0" style="width: 100px">Log out</p></a>
            </nav>
          </div>
          <main class="col-lg-9 col-xl-9">
            <div class="card p-4 mb-0 shadow-0 border">
              <div class="content-body">
             
 {{!-- <table class="cartTable table-responsive" style="font-color:rgb(35, 34, 34)">
              <tbody>
                <tr style="color:rgb(73, 71, 71);height: 80px;">
                  <td style="width:15%;"> Product</td>
                  <td style="width:25%">Details</td> 
                   <td style="width:10%" class="delete">Remove</td>
                </tr>
                {{#each wishlistData}}
                <tr class="CartProduct" id="cartProduct{{@index}}" style="height:120px;" >
                  <td class="CartProductThumb ">
                    <div><a href="/productDetails/{{this.productId._id}}"><img src="images/productImages/{{this.productId.productImage1}}" style="width:40%;height:40%;" alt="img"></a>
                    </div>
                  </td>
                  <td>
                    <div class="CartDescription">
                      <h6><a href="/productDetails/{{this.productId._id}}">{{this.productId.productName}}</a></h6>
                      <div id="productPrice{{@index}}" class="price"><span>₹{{this.productId.productPrice}}</span>
                      </div>
                    </div>
                  </td>
                  
                  <td class="delete"><a title="Delete" onclick="removeWishlist('{{this._id}}','{{@index}}')">  <i class="fas fa-trash"></i></a></td>
                </tr>
                {{/each}}
               
              </tbody>
            </table> --}}


<table class="cartTable table-responsive" style="font-color: rgb(35, 34, 34); width: 100%; border-collapse: collapse;">
    <tbody>
        <tr style="color: rgb(73, 71, 71); height: 50px;font-weight:bold;">
            <td style="width: 15%; border-bottom: 1px solid #ddd; ">My Wishlist</td>
            <td style="width: 25%; border-bottom: 1px solid #ddd;"></td>
            <td style="width: 10%; border-bottom: 1px solid #ddd;" class="delete"></td>
        </tr>
        {{#each wishlistData}}
        <tr class="CartProduct" id="cartProduct{{@index}}" style="height: 120px; border-bottom: 1px solid #ddd;">
            <td class="CartProductThumb">
                <div><a href="/productDetails/{{this.productId._id}}"><img src="images/productImages/{{this.productId.productImage1}}" style="width: 40%; height: 40%;" alt="img"></a></div>
            </td>
            <td>
                <div class="CartDescription">
                    <h6><a href="/productDetails/{{this.productId._id}}">{{this.productId.productName}}</a></h6>
                    <div id="productPrice{{@index}}" class="price"><span>₹{{this.productId.productPrice}}</span></div>
                </div>
            </td>
            <td class="delete"><a title="Delete" onclick="removeWishlist('{{this._id}}','{{@index}}')"><i class="fas fa-trash"></i></a></td>
        </tr>
        {{/each}}
    </tbody>
</table>

         



               
              </div>
            </div>
          </main>
        </div>
    
      </div>
    </section>
    
<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/sweetalert2@10"></script>

<script>
  async function removeWishlist(id, index) {
    try {
      Swal.fire({
        title: "Are you sure?",
        icon: "warning",
        showCancelButton: true,
        confirmButtonColor:"#63666A" ,
        cancelButtonColor:'#00008b',
        confirmButtonText: "Yes, remove it!"
      }).then((result) => {
        if (result.isConfirmed) {
          let cartProductElement = document.getElementById('cartProduct' + index)
          cartProductElement.style.display = "none"
          fetch('/removeWishlist/' + id, { method: 'DELETE' }).then(data => console.log(data))
          Swal.fire({
            title: "Deleted!",
            text: "Product has been removed.",
            icon: "success"

          }).then(() => location.reload());
        }
      });
    } catch (error) {
      console.error(error)
    }
  }
</script> 

                     

   {{> userFooter}}
